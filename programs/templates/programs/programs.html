{% extends "base.html" %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'programs/css/programs.css' %}" />
{% endblock %}

{% block page_header %}
<header class="bg-dark">
    <div class="container px-4 px-lg-5 mt-5 mb-2">
      <div class="text-center text-white">
        <h1 class="display-4 fw-bolder">Expand your knowledge</h1>
        <p class="lead fw-normal text-white-50 mb-0">
            Elevate your expertise with our courses.
        </p>
      </div>

      <ul class="list-inline widget-list-inline text-center my-3">
        <li class="list-inline-item m-1">
          <a href="{% url 'programs' %}">All</a>
        </li>
        <li class="list-inline-item m-1">
          <a href="{% url 'programs' %}?category=fullstack">Full-Stack</a>
        </li>
        <li class="list-inline-item m-1">
          <a href="{% url 'programs' %}?category=ui_ux_design">UI/UX Design</a>
        </li>
        <li class="list-inline-item m-1">
          <a class="" href="{% url 'programs' %}?category=devops">DevOps</a> </li>
        <li class="list-inline-item m-1">
          <a class="" href="{% url 'programs' %}?category=data_science">Data Science</a>
        </li>
        <li class="list-inline-item m-1">
          <a class="" href="{% url 'programs' %}?category=game_dev">Game Dev</a>
        </li>
        <li class="list-inline-item m-1">
          <a class="" href='{% url 'programs' %}?category=mobile_app'>Mobile App</a>
        </li>
    </ul>
    </div>
</header>  

{% endblock %}

{% block content %}
    <!-- Section-->
    <section class="py-3 bg-white">

        {% url 'programs' as url %}
        {% with url=url %}
            {% include "includes/searchbar.html" %}
        {% endwith %}

        
      <div class="container px-4 px-lg-5 mt-5">
          <div
            class="row gx-2 gy-2 row-cols-lg-2 justify-content-center"
          >

          {% for program in programs  %}

          <div class="col">
            <a class="card program-card shadow border-grey overflow-hidden" href="{% url 'program_detail' program.id %}" alt='Link to {{program.name}}'>
              <div class="row">
                <div class="col-lg-4 order-lg-2 bg-dark p-0">
                  <img
                    src="{{ program.image.url }}"
                    class="card-image"
                    alt="Image"
                  />
                </div>
                <div class="col-lg-8">
                  <div class="card-body">
                    {% if program.sale %}
                    <h5>
                      <span
                        class="badge bg-success text-white position-absolute"
                        style="top: 0.5rem; right: 0.5rem"
                      >
                        {{program.sale}}% Sale
                      </span>
                    </h5>
                    {% endif %}
                    <h5 class="text-primary fw-bold">
                        {{program.name}}
                    </h5>
                    <p class="card-text text-secondary pb-2 border-bottom">
                      {{program.description}}
                    </p>
          
                    <div class='px-3'>
                    <div class="my-2 d-flex text-secondary justify-content-between">
                      <div>
                        <i class="fa-solid fa-star text-warning"></i>
                        <strong class="text-dark "
                        >{{program.rating}}</strong
                      >
                      </div>  
                      <div>
                        {% if program.sale %}
                        <em class="text-danger text-decoration-line-through">${{program.price}}</em>
                        {% endif %}
          
                        <i class="fa-solid fa-dollar-sign text-success"></i>
                        <strong class="text-dark">{{program.total_final_price}}</strong>
                      </div>         
                    </div>
          
                    <div class="my-2 d-flex text-secondary justify-content-between">
                      <div>
                        <i class="fa-solid fa-hourglass-start text-primary"></i>
                        <strong class="text-dark "
                        >{{program.length}}</strong
                      >
                      </div>  
                      <div>
                        <i class="fa-solid fa-chart-line text-danger"></i>
                        Difficulty
                      </div>         
                    </div>
                  </div>
                    
                  </div>
                </div>
              </div>
            </a>
          </div>
        
          {% endfor %}
     
          </div>
        </div>
      </section>
{% endblock %}